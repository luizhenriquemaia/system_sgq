{% extends "main/basePage.html" %}
{% block content %}
<div class="content">
    <div class="title-page">
        <h4>Inserir Novo Endereço</h4>
    </div>
    <form method="POST" id="novo-endereco-form">
        {% csrf_token %}
        <div class="row form-field">
            <div class="col s12">
                <label>Região</label>
                {{ form.regiao }}
            </div>
        </div>
        <div class="row form-field">
            <div class="col s12">
                <label>Estado</label>
                {{ form.estado }}
            </div>
        </div>
        <div class="row form-field">
            <div class="col s12">
                <label>Cidade</label>
                {{ form.cidade }}
            </div>
        </div>
        <div class="row form-field">
            <div class="col s6">
                <label>Bairro</label>
                {{ form.bairro }}
            </div>
            <div class="col s6">
                <label>Novo Bairro</label>
                {{ form.novo_bairro }}
            </div>
        </div>
        <div class="row form-field">
            <div class="col s6">
                <label>Logradouro</label>
                {{ form.logradouro }}
            </div>
            <div class="col s6">
                <label>Novo Logradouro</label>
                {{ form.novo_logradouro }}
            </div>
        </div>
        <div class="row form-field">
            <div class="col s12">
            <label>Complemento</label>
            {{ form.complemento }}
        </div>
        </div>
        <br>
        <br>
        <button class="submit-ok submit-hover" name="proximo" type="submit" value="proximo">
            <i class="material-icons">navigate_next</i>
        </button>
    </form>
</div>
<script>
    function carregarDados(element) {
        var xhttp = new XMLHttpRequest();
        if (element.id === "id_regiao") {
            if (element.value !== 0 && element.value !== "") {
                xhttp.onreadystatechange = function (data) {
                    if (this.readyState === 4 && this.status === 200) {
                        document.getElementById("id_estado").innerHTML = this.response
                    }
                }
                xhttp.open("GET", `../ajax/carregar-estados/${element.value}`, true)
                xhttp.send()
            } else {
                document.getElementById("id_estado").innerHTML = ""
            }
        } else if (element.id === "id_estado") {
            if (element.value !== 0 && element.value !== "") {
                xhttp.onreadystatechange = function (data) {
                    if (this.readyState === 4 && this.status === 200) {
                        document.getElementById("id_cidade").innerHTML = this.response
                    }
                }
                xhttp.open("GET", `../ajax/carregar-cidades/${element.value}`, true)
                xhttp.send()
            } else {
                document.getElementById("id_cidade").innerHTML = ""
            }
        } else if (element.id === "id_cidade") {
            if (element.value !== 0 && element.value !== "") {
                xhttp.onreadystatechange = function (data) {
                    if (this.readyState === 4 && this.status === 200) {
                        document.getElementById("id_bairro").innerHTML = this.response
                    }
                }
                xhttp.open("GET", `../ajax/carregar-bairros/${element.value}`, true)
                xhttp.send()
            } else {
                document.getElementById("id_bairro").innerHTML = ""
            }
        } else if (element.id === "id_bairro") {
            if (element.value !== 0 && element.value !== "") {
                xhttp.onreadystatechange = function (data) {
                    if (this.readyState === 4 && this.status === 200) {
                        document.getElementById("id_logradouro").innerHTML = this.response
                    }
                }
                xhttp.open("GET", `../ajax/carregar-logradouros/${element.value}`, true)
                xhttp.send()
            } else {
                document.getElementById("id_logradouro").innerHTML = ""
            }
        }
    }
</script>
{% endblock content %}